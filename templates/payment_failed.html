{% extends './base.html' %}

{% load static %}

{% block content %}
<style>
    .my_card{
        color: #fff;
        margin-top: 30px;
    }
    i{
        color: rgb(128, 0, 0);
        font-size: 50px;
        margin: 15px auto;
        float: center;
    }
    .payment__btn{
        text-decoration: none;
        padding: 10px 130px;
    }
</style>
<div class="payment__container">
    <div class="payment__wrapper__small">
        <div class="card bg-dark my_card">
            <div class="card-body">
                <center>
                    <i class="fa-solid fa-circle-exclamation"></i>
                </center>
                
                <p class="card-header text-center">One Time Subscription Failed</p>
                <hr style="border-color: #fff;">
                <p class="text-center text-white">Your Payment failed, might be due<br>to insufficient balance or network error, but don't worry, you can try again</p>
                <p class="text-center">click the button below to try again</p>
                <a href="{% url 'frontend:make_payment' %}" class="payment__btn">Make Payment</a>
                <p class="text-center small mt-4">if the problem persist, you can reach us through our customer care email: <a href="">customercare@spymate.app</a></p>
            </div>
        </div>
    </div>
</div>

<!-- <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Function to add query parameters and navigate to the new URL
        function addParamsAndNavigate() {
            // Check if the flag exists in session storage
            if (!sessionStorage.getItem('paramsAdded')) {
                var url = window.location.href; // Get the current URL
                var newParams = {
                    param1: 'value1',
                    param2: 'value2'
                };

                // Parse the current URL to extract query parameters
                var searchParams = new URLSearchParams(window.location.search);
                var existingParams = {};

                // Iterate over existing parameters and add them to the object
                for (var pair of searchParams.entries()) {
                    existingParams[pair[0]] = pair[1];
                }

                // Check if the parameters already exist in the URL
                var paramsExist = true;
                for (var key in newParams) {
                    if (!(key in existingParams && existingParams[key] === newParams[key])) {
                        paramsExist = false;
                        break;
                    }
                }

                // If parameters don't exist, add them and set the flag in session storage
                if (!paramsExist) {
                    var queryString = Object.keys(newParams).map(key => key + '=' + newParams[key]).join('&');
                    var newUrl = url + (url.includes('?') ? '&' : '?') + queryString;

                    // Navigate to the new URL
                    window.location.href = newUrl;

                    // Set the flag in session storage
                    sessionStorage.setItem('paramsAdded', 'true');
                }
            }
        }

        // Call the function when the page is visited or refreshed
        addParamsAndNavigate();
    });
</script> -->
    


{% endblock %}